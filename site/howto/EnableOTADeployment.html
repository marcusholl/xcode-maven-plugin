<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Oct 10, 2013
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20131010" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Xcode Maven Plugin - 
How to enable Over-The-Air Deployment</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

    
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js"></script><script type="text/javascript" src="../js/lightbox_me/jquery.lightbox_me.js"></script><script type="text/javascript" src="../js/image_lightbox.js"></script><link rel="stylesheet" type="text/css" href="../css/boxes.css" />        </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Xcode Maven Plugin</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
            
                  <li id="publishDate">Last Published: 2013-10-10</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.13.0</li>
                      
                
            
      
                            </ul>
      </div>

                  
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
            
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                                
      <li>
    
                          <a href="../index.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                  
      <li>
    
                          <a href="../plugin-info.html" title="Goals">
          <i class="none"></i>
        Goals</a>
            </li>
                  
      <li>
    
                          <a href="../usage.html" title="Usage">
          <i class="none"></i>
        Usage</a>
            </li>
                  
      <li>
    
                          <a href="../faq.html" title="FAQ">
          <i class="none"></i>
        FAQ</a>
            </li>
                  
      <li>
    
                          <a href="../release-notes.html" title="Release Notes">
          <i class="none"></i>
        Release Notes</a>
            </li>
                              <li class="nav-header">User Guide</li>
                                
      <li>
    
                          <a href="../userguide/Project Structure.html" title="Project Structure">
          <i class="none"></i>
        Project Structure</a>
            </li>
                  
      <li>
    
                          <a href="../userguide/Advanced Project Structure - Modules.html" title="Advanced Project Structure - Modules">
          <i class="none"></i>
        Advanced Project Structure - Modules</a>
            </li>
                  
      <li>
    
                          <a href="../userguide/Project Pom.html" title="Project Pom">
          <i class="none"></i>
        Project Pom</a>
            </li>
                  
      <li>
    
                          <a href="../userguide/Version information.html" title="Version information">
          <i class="none"></i>
        Version information</a>
            </li>
                                                                                
      <li>
    
                          <a href="../examples/AppBuildExample.html" title="Apps">
          <i class="icon-chevron-down"></i>
        Apps</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../userguide/Packaging the Xcode project with its resolved dependencies.html" title="Packaging the Xcode project with its resolved dependencies">
          <i class="none"></i>
        Packaging the Xcode project with its resolved dependencies</a>
            </li>
                      
      <li>
    
                          <a href="../userguide/Xcode Applications Artifacts Structure.html" title="Xcode Applications Artifacts Structure">
          <i class="none"></i>
        Xcode Applications Artifacts Structure</a>
            </li>
              </ul>
        </li>
                                                                                                                    
      <li>
    
                          <a href="../examples/LibBuildExample.html" title="Libraries">
          <i class="icon-chevron-down"></i>
        Libraries</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../userguide/Fat Binaries.html" title="Fat Binaries">
          <i class="none"></i>
        Fat Binaries</a>
            </li>
                      
      <li>
    
                          <a href="../userguide/Generation and Consumption Libraries with Bundles.html" title="Generation and Consumption Libraries with Bundles">
          <i class="none"></i>
        Generation and Consumption Libraries with Bundles</a>
            </li>
                      
      <li>
    
                          <a href="../userguide/Generation of API Docs with Doxygen.html" title="Generation of API Docs with Doxygen">
          <i class="none"></i>
        Generation of API Docs with Doxygen</a>
            </li>
                      
      <li>
    
                          <a href="../userguide/Xcode Libraries Artifacts Structure.html" title="Xcode Libraries Artifacts Structure">
          <i class="none"></i>
        Xcode Libraries Artifacts Structure</a>
            </li>
              </ul>
        </li>
                  
      <li>
    
                          <a href="../examples/FmwkBuildExample.html" title="Static Xcode Frameworks">
          <i class="none"></i>
        Static Xcode Frameworks</a>
            </li>
                                                                                                  
      <li>
    
                          <a href="../userguide/Dependencies.html" title="Dependency Management">
          <i class="icon-chevron-down"></i>
        Dependency Management</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="../userguide/Consumption of Libraries.html" target="_self" title="Consumption of Libraries">
          <i class="none"></i>
        Consumption of Libraries</a>
            </li>
                      
      <li>
    
                          <a href="../userguide/Consumption of Frameworks.html" title="Consumption of Frameworks">
          <i class="none"></i>
        Consumption of Frameworks</a>
            </li>
                      
      <li>
    
                          <a href="../userguide/Workspace.html" title="Develop Multiple Dependent Xcode Projects">
          <i class="none"></i>
        Develop Multiple Dependent Xcode Projects</a>
            </li>
              </ul>
        </li>
                              <li class="nav-header">How to</li>
                                
      <li>
    
                          <a href="../howto/IncludeMavenMetadataIntoALibrary.html" title="How to include maven metadata into a library">
          <i class="none"></i>
        How to include maven metadata into a library</a>
            </li>
                  
      <li>
    
                          <a href="../howto/UseGenericZipBundles.html" title="How to use generic ZIP bundles">
          <i class="none"></i>
        How to use generic ZIP bundles</a>
            </li>
                  
      <li>
    
                          <a href="../howto/HandlingAmbiguousDeveloperIdentities.html" title="How to handle ambiguous developer identities">
          <i class="none"></i>
        How to handle ambiguous developer identities</a>
            </li>
                  
      <li>
    
                          <a href="../howto/BuildCordovaHelloWorldExample.html" title="How to build the Cordova HelloWorld project">
          <i class="none"></i>
        How to build the Cordova HelloWorld project</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>How to enable Over-The-Air Deployment</a>
          </li>
                  
      <li>
    
                          <a href="../howto/HandlingKeychainsInMasterSlaveEnvironment.html" title="How to handle Keychains in a master/slave environment">
          <i class="none"></i>
        How to handle Keychains in a master/slave environment</a>
            </li>
                  
      <li>
    
                          <a href="../howto/BuildAggregatedFrameworks.html" title="How to build aggregated frameworks">
          <i class="none"></i>
        How to build aggregated frameworks</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                          
      <li>
    
                          <a href="../project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                                                                                              
      <li>
    
                          <a href="../project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
            
                
          <hr class="divider" />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="https://github.com/sap-production/xcode-maven-plugin/xcode-maven-plugin" data-size="tall" ></div>

                   <div class="clear"></div>
                   
        
        
        
    <iframe src="http://www.facebook.com/plugins/like.php?href=https://github.com/sap-production/xcode-maven-plugin/xcode-maven-plugin&send=false&layout=box_count&show-faces=false&action=like&colorscheme=light"
        scrolling="no" frameborder="0"
        style="border:none; width:48px; height:63px; margin-top: 10px;" ></iframe>
               <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                        
        <div id="bodyColumn"  class="span10" >
                                  
            <!-- #%L
  Xcode Maven Plugin
  %%
  Copyright (C) 2012 SAP AG
  %%
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  
       http://www.apache.org/licenses/LICENSE-2.0
  
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
  #L% -->




	<h1>How to enable Over-The-Air Deployment</h1>

	<p>
	This is a step-by-step guide, describing how the Xcode-Maven-Plugin can support Over-The-Air (OTA) Deployment.<br />
	In <a class="externalLink" href="http://help.apple.com/iosdeployment-apps">Apples Documentation</a> you find more information about 
	<a class="externalLink" href="http://help.apple.com/iosdeployment-apps/mac/1.1/#app43ad871e">Over-The-Air Deployment</a> in general.
	</p>
	
	<div class="section"><h2>Introduction<a name="Introduction"></a></h2>
	
	<p>
	Besides the Xcode-Maven-Plugin we provide an <a class="externalLink" href="http://github.com/sap-production/OTAService">OTA Service</a> 
	(detailed information can be found on the project page).<br />
	This service is able to generate on-the-fly an install html page (henceforth referred to as <tt>install page</tt>) and 
	the manifest plist file (<tt>manifest plist</tt>) needed for OTA deployment, based on the provided parameters and the referer.
	The Xcode-Maven-Plugin during the build generates an html page (henceforth referred to as <tt>iframe page</tt>) containing 
	an iframe being populated with the 'install page' generated by the specified OTA service.
	</p>
	
	<p>
	By providing the IPA file and the 'iframe page', generated during the build, next to eachother on a web server users can access the 'iframe page' using their devices.
	For users it is transparent that the OTA service generates the 'install page' on the fly. By clicking the &quot;install&quot; button and confirming the dialog the App will be installed on the device.
	</p>
	
	</div><div class="section"><h2>Xcode-Maven-Plugin build configuration<a name="Xcode-Maven-Plugin_build_configuration"></a></h2>
	<p>
	<b>Prerequisite</b><br />
	You already have an OTA Service deployed and running. The next chapter describes an example how to achieve this.
	</p>
	
	<p>
	To enable the generation of the 'iframe page' you have to specify the 
	<a class="externalLink" href="http://sap-production.github.io/xcode-maven-plugin/site/generate-ota-html-mojo.html#miosOtaServiceUrl">&quot;HTML&quot; OTA Service URL</a> (used by the
	<a class="externalLink" href="http://sap-production.github.io/xcode-maven-plugin/site/generate-ota-html-mojo.html">generate-ota-html mojo</a>)
	in the settings.xml, the pom.xml or as Java system property. 
	E.g. <tt>-Dmios.ota-service.url=http://myserver:8080/ota-service/HTML</tt>
	</p>
	
	<p>
	In our case we use a <a class="externalLink" href="http://hudson-ci.org/">Hudson</a> CI server to build our Xcode Apps. The generated IPA file and 'iframe page' are archived for each build and are accessible via http.<br />
	Testers can navigate to the build results, open the 'iframe page' and click the install link to install the IPA file of this build.
	</p>

	<p><img src="ota/EnableOTADeployment-hudson.jpg" class="screenshot" width="200" height="150" title="Hudson CI server providing IPA and OTA 'iframe page' for each build" alt="" /></p>
	
	<p>
	Since the artifacts are deployed to a central Maven repository it is also possible to find the 'iframe page' (&quot;-ota.htm&quot;) artifact in Nexus, open it and install the IPA from the Maven repository.<br />
	It is even possible to copy the IPA and 'iframe page' to another server (e.g. an internal &quot;App Catalog&quot;) - OTA Service always makes sure the IPA is installed from the location next to the 'iframe page'.
	</p>

	<p><img src="ota/EnableOTADeployment-installerPage.jpg" class="screenshot" width="200" height="150" title="Opened 'iframe page' with 'install page' content generate by the OTA Service. Clicking the 'Install Over-The-Air' button will install the App." alt="" /></p>

	<br />
	<br />
	<br />

	</div><div class="section"><h2>Hosting an OTA Service<a name="Hosting_an_OTA_Service"></a></h2>
	
	<p>
	Hosting an an OTA service is easy. All you need is a Java servlet engine (like <a class="externalLink" href="http://tomcat.apache.org/">Apache Tomcat</a>) where you deploy the ota-service.war file:
	</p><ul>
	  <li>Install Tomcat</li>
	  <li>Clone the <a class="externalLink" href="http://github.com/sap-production/OTAService">OTA-Service project</a> and build it</li>. Or directly download the latest released war file from <a class="externalLink" href="http://search.maven.org/#search|ga|1|a%3A%22com.sap.prd.mobile.ios.ota.webapp%22">Maven Central</a>.
	  <li>Copy the <tt>ota-service.war</tt> file from the target folder to the Tomcat/webapps folder and restart Tomcat</li>
	  <li>Use the OTA-Service by specifying the <tt>mios.ota-service.url</tt> in the <tt>xcode-maven-build</tt> as described above (don't forget the <tt>/HTML</tt> - e.g. <tt>-Dmios.ota-service.url=http://myserver:8080/ota-service/HTML</tt>)</li>
	</ul>	
	
	
	<p class="info">The <a class="externalLink" href="http://github.com/sap-production/OTAService#configuration-in-tomcat">OTA Service Documentation</a> describes how to configure custom HTML templates.</p>

	<div class="section"><h3>Hosting OTA Service on Cloudbees<a name="Hosting_OTA_Service_on_Cloudbees"></a></h3>
	
	<p>If you don't want to host an OTA Service on you own - here is an example how to host an OTA Service on <a class="externalLink" href="http://www.cloudbees.com">Cloudbees</a> in 5-10 minutes.</p>
	
	<p>After registering a free Cloudbees Account you have to subscribe to some additional free services. Click <a class="externalLink" href="http://grandcentral.cloudbees.com/subscriptions"><tt>Browse Ecosystem</tt></a>.<br />
	<img src="ota/cloudbees_overview.jpg" class="screenshot" width="200" height="150" title="Cloudbees Overview Page - Click 'Browse Ecosystem' to add additional services" alt="" /></p>

	<p>Subscribe to the free Jenkins DEV@cloud service<br />
	<img src="ota/cloudbees_jenkins1.jpg" class="screenshot" width="200" height="150" title="Jenkins DEV@cloud service subscription model - free is enough" alt="" /></p>
		
	<p>Click on <tt>Builds</tt> to access your Jenkins. Click on <tt>New Job</tt> to add a new job.<br />
	<img src="ota/cloudbees_jenkins.jpg" class="screenshot" width="200" height="150" title="Jenkins overview - add a job" alt="" /></p>

	<p>Give it a name and select <tt>Build a maven2/3 project</tt>.<br />
	<img src="ota/cloudbees_jenkins2.jpg" class="screenshot" width="200" height="150" title="Job configuration - create a 'Build a maven2/3 project'" alt="" /></p>

	<p>	
	As Git repository specify <tt>http://github.com/sap-production/OTAService.git</tt> and specify <tt>clean install</tt> as Maven build goals.<br />
    As Post-build Action add <tt>Deploy applications</tt>, specify a new application ID and the group- and artifact Id of the OTA Service webapp(<i>com.sap.prd.mobile.ios.ota</i> : <i>com.sap.prd.mobile.ios.ota.webapp</i>).<br />
	</p><table border="0" class="table table-striped" width="1px"><tr class="a"><td valign="top">
	<img src="ota/cloudbees_jenkins3a.jpg" class="screenshot" width="200" height="150" title="Git SCM configuration - fetch the OTA service sources" alt="" />
	</td><td valign="top">
	<img src="ota/cloudbees_jenkins3b.jpg" class="screenshot" width="200" height="150" title="Maven build configuration" alt="" />
	</td><td valign="top">
	<img src="ota/cloudbees_jenkins3c.jpg" class="screenshot" width="200" height="150" title="Application Deployment configuration" alt="" />
	</td></tr></table>
	

	<p>Save your job and trigger your first build.<br />
	<img src="ota/cloudbees_jenkins4.jpg" class="screenshot" width="200" height="150" title="Job created - successfully built" alt="" /></p>

	<p>In the console log you should see that the application was has been deployed to your Cloudbees application server.<br />
	<tt>[cloudbees-deployer] Deployed to application id youraccount/otaservice</tt><br />
	<tt>[cloudbees-deployer] Can be accessed at http://otaservice.youraccount.us.cloudbees.net</tt>
	</p>
	
	<p>You can test the OTA service by adding <tt>/HTML</tt> to the URL. It should display <tt>HTTP Status 400 - Referer required</tt> (since it only works from the HTML page generated during the xcode-maven-build).<br />
	<img src="ota/cloudbees_jenkins5.jpg" class="screenshot" width="200" height="150" title="Testing the OTA Service - 400 'Referer required' is good" alt="" /></p>

	<p class="info">Since it is not easily possible to configure the web application when it is running on Cloudbees we recommend to fork the OTA-Service project and customize the HTML template located in <tt>/modules/ota-library/src/main/resources/template.html</tt>.</p>
		
</div></div>

                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2012-2013
                      SAP AG.
            All Rights Reserved.      
            
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
