<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../resources/report.gif" type="image/gif"/><title>XCodeProjectLayoutValidator.java</title><link rel="stylesheet" href="../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="right"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Xcode Maven Plugin</a> &gt; <a href="index.html" class="el_package">com.sap.prd.mobile.ios.mios</a> &gt; <span class="el_source">XCodeProjectLayoutValidator.java</span></div><h1>XCodeProjectLayoutValidator.java</h1><pre class="source lang-java linenums">/*
 * #%L
 * xcode-maven-plugin
 * %%
 * Copyright (C) 2012 SAP AG
 * %%
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *      http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * #L%
 */
package com.sap.prd.mobile.ios.mios;

import java.io.File;
import java.io.FileFilter;
import java.util.Arrays;
import java.util.Collection;

<span class="nc" id="L27">class XCodeProjectLayoutValidator</span>
{

  /**
   * Checks if a folder is a valid xcode folder. A folder is considered to be a valid xcode folder
   * if
   * &lt;ul&gt;
   * &lt;li&gt;it does exist
   * &lt;li&gt;it contains a folder named &quot;&amp;lt;projectName&amp;gt;.xcodeproj&quot;
   * &lt;li&gt;in the folder(s) mentioned before we have a file named project.pbxproj
   * 
   * @throws XCodeException
   *           is the folder is not a valid xcode project folder
   */
  static void verifyXcodeFolder(final File xcodeFolder, final String projectName) throws XCodeVerificationException
  {

<span class="fc bfc" id="L44" title="All 2 branches covered.">    if (!xcodeFolder.exists()) {</span>
<span class="fc" id="L45">      throw new XCodeRootFolderDoesNotExistException(&quot;The folder \&quot;&quot; + xcodeFolder</span>
            + &quot;\&quot; that is the root folder of the xcode project \&quot;&quot; + projectName + &quot;\&quot; does not exist.&quot;);
    }

<span class="fc" id="L49">    final String xcodeProjectFolderName = projectName + XCodeConstants.XCODE_PROJECT_EXTENTION;</span>

<span class="fc" id="L51">    final Collection&lt;File&gt; xcodeProjectFolders = Arrays.asList(xcodeFolder.listFiles(new FileFilter() {</span>

      @Override
      public boolean accept(File f)
      {
<span class="pc bpc" id="L56" title="1 of 4 branches missed.">        return f.isDirectory() &amp;&amp; f.getName().equals(xcodeProjectFolderName);</span>
      }
    }));

<span class="fc bfc" id="L60" title="All 2 branches covered.">    if (xcodeProjectFolders.size() == 0)</span>
    {
<span class="fc" id="L62">      throw new XCodeProjectNotFoundException(</span>
            &quot;The folder \&quot;&quot;
                  + xcodeFolder
                  + &quot;\&quot; must contain folder named \&quot;&quot;
                  + xcodeProjectFolderName
                  + &quot;\&quot;. This folder is expected to hold the xcode project configuration. The xcode project must have the same name as the maven artifactId&quot;);
    }

<span class="fc bfc" id="L70" title="All 2 branches covered.">    for (final File xcodeProjectFolder : xcodeProjectFolders)</span>

<span class="fc bfc" id="L72" title="All 2 branches covered.">      if (xcodeProjectFolder.listFiles(new FileFilter() {</span>

        @Override
        public boolean accept(File f)
        {
<span class="fc" id="L77">          return f.getName().equals(XCodeConstants.XCODE_CONFIGURATION_FILE_NAME);</span>
        }
      }).length != 1)
<span class="fc" id="L80">        throw new XCodeProjectFileDoesNotExistException(&quot;Folder \&quot;&quot; + xcodeProjectFolders</span>
              + &quot;\&quot; is expected to contain the file \&quot;&quot;
              + XCodeConstants.XCODE_CONFIGURATION_FILE_NAME + &quot;\&quot; but that file does not exist.&quot;);
<span class="fc" id="L83">  }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.3.201306030806</span></div></body></html>
